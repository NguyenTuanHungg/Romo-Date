<div class="w-full h-screen  ">


  <!-- Navbar -->
  <div class="h-[108px]  flex flex-grow  items-center   justify-between w-full">
    <!-- Navbar content goes here -->

    <div class="flex list-none">
<!--      <img src="../images/ROMO.png" alt="Your Image" class="w-48 h-16 mt-[15px] ml-[37px]" />-->
      <div class=" mt-[15px] ml-[37px]">
        <%= image_tag 'ROMO.png' ,size:'197x68'  %>

          </div>
      <ul class="flex items-center ml-8">
        <li class="font-roboto text-base leading-4 font-bold mr-9">ROMOとは</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">サービス概要</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">オンライン面談/申し込み</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">コース案内</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">Role Models</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">口コミ</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">お知らせ</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">About US</li>
        <li class="font-roboto text-base leading-4 font-bold mr-9">サイトマップ</li>
      </ul>
    </div>
    <div class=" flex justify-between items-center mr-7 ">
      <div class=" rounded-full logo-color w-[40px] h-[40px] flex items-center justify-center">
        <%= image_tag 'A.png' ,class: 'w-[22px] h-[25px]'  %>

      </div>

      <div class="ml-3 text-2xl ">
                                 <span >
                                    マイページ
                                  </span>
      </div>
    </div>
  </div>
  <div class=" flex  w-full flex-grow h-full ">
    <div class="w-full text-center">
      <div class="font-bold mt-6 mb-4" ><span>1回目の予約時間を選択してください</span>
      </div><%= form_with(   url: select_week_appointments_path,
                             method: 'get',
                             remote: true,
                             id: "status-form"
                      ) do |form| %>

    <table class="w-full overflow-auto border-collapse separate  ">
        <thead class="thead-background">
        <tr class="border text-white border-white  " id="daysOfWeek">
          <th class="w-12 py-2 px-4  border-4 leading-4 border-white"> </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white "> 月 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white "> 火 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white"> 水 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white"> 木 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white"> 金 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white"> 土 </th>
          <th class="day-cell py-2 px-4  border-4 text-center leading-4 border-white"> 日 </th>
        </tr>
        </thead>

      <% TimeSlot.times.each  do |key, value| %>
``      <tr class="border">

      <td class="py-2 px-4 td1-color text-white border-white"><%= value %></td>
      <% if @days_of_week.present? %>
          <% @days_of_week.each_with_index do |day, i| %>
          <td class="py-2 px-4 border-4 text-center td2-color border-white">
            <div class="icon-container">
              <% if @appointments_with_time_slots.any? { |appointment| appointment.date.strftime('%Y-%m-%d') == day && appointment.time_slots.pluck(:time).include?(value) } %>
                <%= image_tag 'tick.svg', class: 'icon', id: "tick-image-#{key}-#{i}"  %>
              <% else %>
                <%= image_tag 'tick.svg', class: 'hidden-icon', id: "tick-image-#{key}-#{i}"  %>
              <% end %>
            </div>
          </td>
        <% end %>
      <% end %>

        </tr>
        <%end %>
      <%= form.hidden_field :days, id: "selected_days_input" %>
      <%= form.submit 'Select Week', style: 'display:none;' ,id:'form-submit' %>
      </table>
      <%end %>

      <div class="flex mt-10 justify-end w-full  ">
        <button class="color-prev  font-bold font-size-button py-2 px-4 rounded w-[100px] h-[32px] color-edit border  flex items-center justify-center">戻り</button>

      <button class="thead-background text-white font-bold font-size-button py-2 px-4 rounded w-[100px] h-[32px] ml-6  flex items-center justify-center">次へ</button>
      </div>

    </div>
    <div class="w-2/5 flex justify-center mt-10 ml-3">
      <div id='calendar'></div>

    </div>

  </div>
  <div class="h-[348px] bg-[#E9EDF1]   justify-between ">
    <div class=" flex mt-14 justify-around ">
<!--      <img src="./img/ROMO.png" class="h-[187px] w-[371px] " alt="">-->
      <%= image_tag 'ROMO.png', class: "h-[187px] w-[371px] mt-10"  %>

      <ul class="ml-6  mt-10 font-bold"   >
        <li class="mb-4">ROMOとは</li>
        <li class="mb-4">サービス概要</li>
        <li class="mb-4">オンライン面談/申し込み</li>
        <li class="mb-4">コース案内</li>
      </ul>
      <ul class="ml-6 mt-10  font-bold">
        <li class="mb-4">Role Models
        </li>
        <li class="mb-4">口コミ</li>
        <li class="mb-4">お知らせ</li>
      </ul>
      <ul class="ml-6  mt-10 font-bold">
        <li class="mb-4">About US
        </li>
        <li class="mb-4">お問い合わせ</li>
        <li class="mb-4">サイトマップ</li>
        <li class="mb-4">プライバシーポリシー</li>
      </ul>
      <ul class="ml-6 mt-10  font-bold">
        <li class="mb-4 flex items-center relative right-5 ">
          <svg class="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11.0286 0.0012304C11.7583 -0.00156983 12.488 0.00576429 13.2176 0.0232305L13.4116 0.0302304C13.6356 0.0382304 13.8566 0.0482304 14.1236 0.0602304C15.1876 0.11023 15.9136 0.278231 16.5506 0.525231C17.2106 0.779231 17.7666 1.12323 18.3226 1.67923C18.831 2.17884 19.2244 2.78318 19.4756 3.45023C19.7226 4.08723 19.8906 4.81423 19.9406 5.87823C19.9526 6.14423 19.9626 6.36623 19.9706 6.59023L19.9766 6.78423C19.9943 7.51342 20.002 8.24283 19.9996 8.97223L20.0006 9.71823V11.0282C20.003 11.758 19.9954 12.4877 19.9776 13.2172L19.9716 13.4112C19.9636 13.6352 19.9536 13.8562 19.9416 14.1232C19.8916 15.1872 19.7216 15.9132 19.4756 16.5502C19.2252 17.218 18.8317 17.8228 18.3226 18.3222C17.8225 18.8306 17.2179 19.224 16.5506 19.4752C15.9136 19.7222 15.1876 19.8902 14.1236 19.9402C13.8566 19.9522 13.6356 19.9622 13.4116 19.9702L13.2176 19.9762C12.4881 19.994 11.7583 20.0017 11.0286 19.9992L10.2826 20.0002H8.97358C8.24384 20.0027 7.5141 19.995 6.78458 19.9772L6.59058 19.9712C6.35319 19.9626 6.11585 19.9526 5.87858 19.9412C4.81458 19.8912 4.08858 19.7212 3.45058 19.4752C2.78326 19.2246 2.17881 18.8311 1.67958 18.3222C1.17062 17.8225 0.776801 17.2178 0.525577 16.5502C0.278577 15.9132 0.110577 15.1872 0.0605769 14.1232C0.0494399 13.8859 0.0394398 13.6486 0.030577 13.4112L0.0255771 13.2172C0.00714068 12.4877 -0.00119355 11.758 0.000577001 11.0282V8.97223C-0.00221397 8.24283 0.00512015 7.51343 0.0225771 6.78423L0.029577 6.59023C0.037577 6.36623 0.047577 6.14423 0.059577 5.87823C0.109577 4.81323 0.277577 4.08823 0.524577 3.45023C0.77595 2.78285 1.17054 2.17868 1.68058 1.68023C2.17947 1.17098 2.78354 0.776803 3.45058 0.525231C4.08858 0.278231 4.81358 0.11023 5.87858 0.0602304L6.59058 0.0302304L6.78458 0.0252306C7.51376 0.00680338 8.24316 -0.00153085 8.97258 0.000230468L11.0286 0.0012304ZM10.0006 5.00123C9.33808 4.99186 8.68033 5.11425 8.06555 5.3613C7.45077 5.60834 6.89122 5.97511 6.41942 6.44029C5.94762 6.90546 5.57298 7.45977 5.31726 8.07099C5.06155 8.68222 4.92987 9.33817 4.92987 10.0007C4.92987 10.6633 5.06155 11.3192 5.31726 11.9305C5.57298 12.5417 5.94762 13.096 6.41942 13.5612C6.89122 14.0264 7.45077 14.3931 8.06555 14.6402C8.68033 14.8872 9.33808 15.0096 10.0006 15.0002C11.3267 15.0002 12.5984 14.4734 13.5361 13.5358C14.4738 12.5981 15.0006 11.3263 15.0006 10.0002C15.0006 8.67415 14.4738 7.40238 13.5361 6.4647C12.5984 5.52701 11.3267 5.00123 10.0006 5.00123ZM10.0006 7.00123C10.3991 6.99389 10.7951 7.06603 11.1654 7.21344C11.5357 7.36085 11.8729 7.58057 12.1574 7.85978C12.4418 8.13898 12.6678 8.47206 12.822 8.83957C12.9763 9.20708 13.0558 9.60165 13.0558 10.0002C13.0559 10.3988 12.9766 10.7934 12.8224 11.1609C12.6683 11.5285 12.4424 11.8617 12.1581 12.141C11.8737 12.4203 11.5366 12.6401 11.1663 12.7876C10.796 12.9352 10.4001 13.0074 10.0016 13.0002C9.20593 13.0002 8.44287 12.6842 7.88026 12.1216C7.31765 11.5589 7.00158 10.7959 7.00158 10.0002C7.00158 9.20458 7.31765 8.44152 7.88026 7.87891C8.44287 7.3163 9.20593 7.00023 10.0016 7.00023L10.0006 7.00123ZM15.2506 3.50123C14.928 3.51414 14.6229 3.65138 14.3992 3.8842C14.1755 4.11702 14.0506 4.42736 14.0506 4.75023C14.0506 5.0731 14.1755 5.38344 14.3992 5.61626C14.6229 5.84908 14.928 5.98632 15.2506 5.99923C15.5821 5.99923 15.9 5.86753 16.1345 5.63311C16.3689 5.39869 16.5006 5.08075 16.5006 4.74923C16.5006 4.41771 16.3689 4.09977 16.1345 3.86535C15.9 3.63093 15.5821 3.49923 15.2506 3.49923V3.50123Z" fill="black"/>
          </svg>
          <span >インスタグラム</span>
        </li>
        <li class="mb-4">ログイン</li>
        <li class="mb-4">学生登録</li>
        <li class="mb-4">社会人登録</li>
      </ul>

    </div>
    <div class="text-center font-bold mt-14 font-size ">All right reserved, Copyright ©Romo Enterprise</div>
  </div>
</div>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var appointmentForm = document.getElementById('appointment-form');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            selectable: true,
            locale: 'ja',
            dayCellContent: function(arg) {
                return arg.date.getDate().toString();
            },

            dateClick: function(info) {
                var selectedDate = new Date(info.date);
                var startOfWeek = new Date(selectedDate);
                var endOfWeek = new Date(selectedDate);
                if (info.event) {
                    info.event.preventDefault(); // Ngăn chặn hành động mặc định của form
                }
                startOfWeek.setDate(selectedDate.getDate() - selectedDate.getDay() + 1); // Ngày đầu tiên của tuần (thứ Hai)
                endOfWeek.setDate(selectedDate.getDate() - selectedDate.getDay() + 7); // Ngày cuối cùng của tuần (Chủ Nhật)

                var daysOfWeek = [];

                // Lặp qua mỗi ngày trong tuần
                for (var day = new Date(startOfWeek); day <= endOfWeek; day.setDate(day.getDate() + 1)) {
                    daysOfWeek.push(day.toISOString().split('T')[0]); // Format ngày thành YYYY-MM-DD
                }

                document.getElementById('selected_days_input').value = daysOfWeek.join(',');
                document.getElementById('form-submit').click();
            },
            showNonCurrentDates: false,
            headerToolbar: {
                left: 'prev title next',
            },
        });
        // calendar.setOption('dateClick', function(info) {
        //     const selectedDate = info.dateStr;
        //
        //     // Tạo một input ẩn và đặt giá trị của selectedDate vào
        //     var hiddenInput = document.createElement('input');
        //     hiddenInput.type = 'hidden';
        //     hiddenInput.name = 'date';
        //     hiddenInput.value = selectedDate;
        //
        //     appointmentForm.appendChild(hiddenInput);
        // });
        calendar.render();
    });

</script>
<script>


    // document.addEventListener('DOMContentLoaded', function() {
    //     var cells = document.querySelectorAll('.td2-color');
    //
    //     cells.forEach(function(cell) {
    //         var icon = cell.querySelector('.icon');
    //         var inputElement = cell.querySelector('.time-slot-input');
    //
    //         cell.addEventListener('click', function() {
    //             if (icon.classList.contains('hidden-icon')) {
    //                 icon.classList.remove('hidden-icon');
    //                 inputElement.value = inputElement.dataset.value;
    //             } else {
    //                 icon.classList.add('hidden-icon');
    //                 inputElement.value = '';
    //             }
    //         });
    //     });
    // });

</script>

